/* empty css             */import{_ as y,r as m,w as x,v as k,o as a,c as n,a as t,b as c,d,F as S,e as w,f as D,g as b,h,t as _,i as u}from"./index-a5dae4b5.js";const T={components:{},data(){return{contentDiv:[],textarea:"",right:!0,show:!1,flag:!0,closeChat:this.close,session_id:""}},created(){let e=localStorage.getItem("session_id");if(e){this.session_id=e;let i=localStorage.getItem(this.session_id);i&&(this.contentDiv=JSON.parse(i))}},mounted(){this.scrollToBottom()},updated(){this.scrollToBottom()},methods:{scrollToBottom(){this.$nextTick(()=>{let e=this.$el.querySelector(".talk-content");e.scrollTop=e.scrollHeight})},sendInfo(){alert("aaa")},isShow(){},iptFocus(){},clear(){this.session_id&&(localStorage.removeItem(this.session_id),localStorage.removeItem("session_id"),this.contentDiv=[],this.session_id="")},async submit(){let e=this.textarea;this.textarea="";let i=this.$el.querySelector("#textinput");i.style.height="";let o=!1;this.contentDiv.length==0&&(o=!0);let p={name:"你",url:"",showAvartar:o,content:e,right:!0,time:new Date().toLocaleTimeString()};this.contentDiv.push(p),this.save();let l=await this.ask(e),r={name:"AI",url:"",showAvartar:o,content:l,right:!1,time:new Date().toLocaleTimeString()};this.contentDiv.push(r),this.save()},save(){this.session_id&&localStorage.setItem(this.session_id,JSON.stringify(this.contentDiv))},async ask(e){let o=await(await fetch("/api/ai/ask",{method:"POST",body:JSON.stringify({prompt:e,session_id:this.session_id}),headers:{"Content-Type":"application/json"}})).json();return o.session_id&&(!this.session_id||!this.session_id.length)&&(this.session_id=o.session_id,this.saveSession(this.session_id)),o.message},saveSession(e){localStorage.setItem("session_id",e)},exit(){this.$emit("close",this.flag)}}},B={class:"talk"},C={class:"talk-header"},I=t("div",{class:"talk-message-title"},"智能AI对话",-1),A={class:"talk-message-clear"},F={class:"talk-content"},N={style:{"margin-top":"20px"}},z={key:0},O={key:0,style:{display:"flex","justify-content":"flex-end","align-items":"center"}},V={class:"name_right"},j={style:{"font-size":"0.5rem",color:"#9b9b9b"}},J={class:"url_right"},K={class:"content_right"},L={key:1},q={key:0,style:{display:"flex","align-items":"center"}},H={class:"url_left"},E={class:"name_left"},M={style:{"font-size":"0.5rem",color:"#9b9b9b"}},P={class:"content_left"},U={class:"talk-message"},$={class:"talk-message-content"},G={class:"talk-message-send"};function Q(e,i,o,p,l,r){const v=m("a-button"),g=m("a-avatar"),f=m("a-textarea");return x((a(),n("div",B,[t("div",C,[I,t("div",A,[c(v,{type:"text",onClick:r.clear},{default:d(()=>[h("新会话")]),_:1},8,["onClick"])])]),t("div",F,[(a(!0),n(S,null,w(l.contentDiv,s=>(a(),n("div",N,[s.right?(a(),n("div",z,[s.showAvartar?(a(),n("div",O,[t("div",V,[t("p",j,_(s.time),1)]),t("div",J,[c(g,{shape:"circle",size:30},{default:d(()=>[h("你")]),_:1})])])):u("",!0),t("div",K,[t("pre",null,_(s.content),1)])])):u("",!0),s.right?u("",!0):(a(),n("div",L,[s.showAvartar?(a(),n("div",q,[t("div",H,[c(g,{shape:"circle",size:30,style:{backgroundColor:"#f56a00",verticalAlign:"middle"}},{default:d(()=>[h("AI")]),_:1})]),t("div",E,[t("p",M,_(s.time),1)])])):u("",!0),t("div",P,[t("pre",null,_(s.content),1)])]))]))),256))]),t("div",U,[t("div",$,[c(f,{id:"textinput",style:{"overflow-y":"hidden"},value:l.textarea,"onUpdate:value":i[0]||(i[0]=s=>l.textarea=s),resize:"none",type:"textarea",rows:1,onKeypress:D(b(r.submit,["prevent"]),["enter"]),oninput:'this.style.height = "";this.style.height = this.scrollHeight + "px"'},null,8,["value","onKeypress"])]),t("div",G,[c(v,{type:"text",onClick:r.submit},{default:d(()=>[h("发送")]),_:1},8,["onClick"])])])],512)),[[k,l.flag]])}const X=y(T,[["render",Q]]);export{X as default};
