/* empty css             */import{_ as y,r as m,w as k,v as x,o as a,c as n,a as t,b as c,d,F as S,e as w,f as D,g as b,h,t as _,i as u}from"./index-adab7788.js";const T={components:{},data(){return{contentDiv:[],textarea:"",right:!0,show:!1,flag:!0,closeChat:this.close,session_id:""}},created(){let e=localStorage.getItem("session_id");if(e){this.session_id=e;let i=localStorage.getItem(this.session_id);i&&(this.contentDiv=JSON.parse(i))}},mounted(){this.scrollToBottom()},updated(){this.scrollToBottom()},methods:{scrollToBottom(){this.$nextTick(()=>{let e=this.$el.querySelector(".talk-content");e.scrollTop=e.scrollHeight})},sendInfo(){alert("aaa")},isShow(){},iptFocus(){},clear(){this.session_id&&(localStorage.removeItem(this.session_id),localStorage.removeItem("session_id"),this.contentDiv=[],this.session_id="")},async submit(){let e=this.textarea;this.textarea="";let i=this.$el.querySelector("#textinput");i.style.height="";let o=!1;this.contentDiv.length==0&&(o=!0);let v={name:"你",url:"",showAvartar:o,content:e,right:!0,time:new Date().toLocaleTimeString()};this.contentDiv.push(v),this.save();let l=await this.ask(e),r={name:"AI",url:"",showAvartar:o,content:l,right:!1,time:new Date().toLocaleTimeString()};this.contentDiv.push(r),this.save()},save(){this.session_id&&localStorage.setItem(this.session_id,JSON.stringify(this.contentDiv))},async ask(e){let o=await(await fetch("/api/ai/ask",{method:"POST",body:JSON.stringify({prompt:e,session_id:this.session_id}),headers:{"Content-Type":"application/json"}})).json();return o.session_id&&(!this.session_id||!this.session_id.length)&&(this.session_id=o.session_id,this.saveSession(this.session_id)),o.message},saveSession(e){localStorage.setItem("session_id",e)},exit(){this.$emit("close",this.flag)}}},B={class:"talk"},C={class:"talk-header"},I=t("div",{class:"talk-message-title"},"智能AI对话",-1),A={class:"talk-message-clear"},F={class:"talk-content"},N={key:0},z={key:0,style:{display:"flex","justify-content":"flex-end","align-items":"center"}},O={class:"name_right"},V={style:{"font-size":"0.5rem",color:"#9b9b9b"}},j={class:"url_right"},J={class:"content_right"},K={key:1},L={key:0,style:{display:"flex","align-items":"center"}},q={class:"url_left"},H={class:"name_left"},E={style:{"font-size":"0.5rem",color:"#9b9b9b"}},M={class:"content_left"},P={class:"talk-message"},U={class:"talk-message-content"},$={class:"talk-message-send"};function G(e,i,o,v,l,r){const p=m("a-button"),g=m("a-avatar"),f=m("a-textarea");return k((a(),n("div",B,[t("div",C,[I,t("div",A,[c(p,{type:"text",onClick:r.clear},{default:d(()=>[h("新会话")]),_:1},8,["onClick"])])]),t("div",F,[(a(!0),n(S,null,w(l.contentDiv,s=>(a(),n("div",null,[s.right?(a(),n("div",N,[s.showAvartar?(a(),n("div",z,[t("div",O,[t("p",V,_(s.time),1)]),t("div",j,[c(g,{shape:"circle",size:30},{default:d(()=>[h("你")]),_:1})])])):u("",!0),t("div",J,[t("pre",null,_(s.content),1)])])):u("",!0),s.right?u("",!0):(a(),n("div",K,[s.showAvartar?(a(),n("div",L,[t("div",q,[c(g,{shape:"circle",size:30,style:{backgroundColor:"#f56a00",verticalAlign:"middle"}},{default:d(()=>[h("AI")]),_:1})]),t("div",H,[t("p",E,_(s.time),1)])])):u("",!0),t("div",M,[t("pre",null,_(s.content),1)])]))]))),256))]),t("div",P,[t("div",U,[c(f,{id:"textinput",style:{"overflow-y":"hidden"},value:l.textarea,"onUpdate:value":i[0]||(i[0]=s=>l.textarea=s),resize:"none",type:"textarea",rows:1,onKeypress:D(b(r.submit,["prevent"]),["enter"]),oninput:'this.style.height = "";this.style.height = this.scrollHeight + "px"'},null,8,["value","onKeypress"])]),t("div",$,[c(p,{type:"text",onClick:r.submit},{default:d(()=>[h("发送")]),_:1},8,["onClick"])])])],512)),[[x,l.flag]])}const W=y(T,[["render",G]]);export{W as default};
