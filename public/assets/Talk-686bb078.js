/* empty css             */import{_ as y,r as u,w as x,v as k,o as a,c as l,a as t,F as S,b as D,d as c,e as b,f as w,g as r,t as d,h,i as v}from"./index-05688698.js";const T={components:{},data(){return{contentDiv:[],textarea:"",right:!0,show:!1,flag:!0,closeChat:this.close,session_id:""}},created(){let e=localStorage.getItem("session_id");if(e){this.session_id=e;let s=localStorage.getItem(this.session_id);s&&(this.contentDiv=JSON.parse(s))}},mounted(){this.scrollToBottom()},updated(){this.scrollToBottom()},methods:{scrollToBottom(){this.$nextTick(()=>{let e=this.$el.querySelector(".talk-content");e.scrollTop=e.scrollHeight})},sendInfo(){alert("aaa")},isShow(){},iptFocus(){},clear(){this.session_id&&(localStorage.removeItem(this.session_id),localStorage.removeItem("session_id"),this.contentDiv=[],this.session_id="")},async submit(){let e=this.textarea;this.textarea="";let s=this.$el.querySelector("#textinput");s.style.height="";let o={name:"你",url:"",content:e,right:!0,time:new Date().toLocaleTimeString()};this.contentDiv.push(o),this.save();let n={name:"AI",url:"",content:await this.ask(e),right:!1,time:new Date().toLocaleTimeString()};this.contentDiv.push(n),this.save()},save(){this.session_id&&localStorage.setItem(this.session_id,JSON.stringify(this.contentDiv))},async ask(e){let o=await(await fetch("/api/ai/ask",{method:"POST",body:JSON.stringify({prompt:e,session_id:this.session_id}),headers:{"Content-Type":"application/json"}})).json();return o.session_id&&(!this.session_id||!this.session_id.length)&&(this.session_id=o.session_id,this.saveSession(this.session_id)),o.message},saveSession(e){localStorage.setItem("session_id",e)},exit(){this.$emit("close",this.flag)}}},B={class:"talk"},C=t("div",{class:"talk-header"},[t("h2",null,"智能AI对话")],-1),I={class:"talk-content"},F={style:{"margin-top":"20px"}},N={key:0},A={style:{display:"flex","justify-content":"flex-end","align-items":"center"}},z={class:"name_right"},O={style:{"font-size":"0.5rem",color:"#9b9b9b"}},V={class:"url_right"},j={class:"content_right"},J={key:1},K={style:{display:"flex","align-items":"center"}},L={class:"url_left"},q={class:"name_left"},H={style:{"font-size":"0.5rem",color:"#9b9b9b"}},E={class:"content_left"},M={class:"talk-message"},P={class:"talk-message-content"},U={class:"talk-message-send"},$={class:"talk-message-clear"};function G(e,s,o,g,n,_){const m=u("a-avatar"),f=u("a-textarea"),p=u("a-button");return x((a(),l("div",B,[C,t("div",I,[(a(!0),l(S,null,D(n.contentDiv,i=>(a(),l("div",F,[i.right?(a(),l("div",N,[t("div",A,[t("div",z,[t("p",O,d(i.time),1)]),t("div",V,[c(m,{shape:"circle",size:30},{default:r(()=>[h("你")]),_:1})])]),t("div",j,[t("pre",null,d(i.content),1)])])):v("",!0),i.right?v("",!0):(a(),l("div",J,[t("div",K,[t("div",L,[c(m,{shape:"circle",size:30,style:{backgroundColor:"#f56a00",verticalAlign:"middle"}},{default:r(()=>[h("AI")]),_:1})]),t("div",q,[t("p",H,d(i.time),1)])]),t("div",E,[t("pre",null,d(i.content),1)])]))]))),256))]),t("div",M,[t("div",P,[c(f,{id:"textinput",style:{"overflow-y":"hidden"},value:n.textarea,"onUpdate:value":s[0]||(s[0]=i=>n.textarea=i),resize:"none",type:"textarea",rows:1,onKeypress:b(w(_.submit,["prevent"]),["enter"]),oninput:'this.style.height = "";this.style.height = this.scrollHeight + "px"'},null,8,["value","onKeypress"])]),t("div",U,[c(p,{type:"text",onClick:_.submit},{default:r(()=>[h("发送")]),_:1},8,["onClick"])]),t("div",$,[c(p,{type:"text",onClick:_.clear},{default:r(()=>[h("新会话")]),_:1},8,["onClick"])])])],512)),[[k,n.flag]])}const W=y(T,[["render",G]]);export{W as default};
